\hypertarget{encoder_8cpp}{}\doxysection{src/hibrid-\/encoder/encoder.cpp File Reference}
\label{encoder_8cpp}\index{src/hibrid-\/encoder/encoder.cpp@{src/hibrid-\/encoder/encoder.cpp}}
{\ttfamily \#include $<$opencv2/opencv.\+hpp$>$}\newline
{\ttfamily \#include $<$opencv2/imgproc/imgproc.\+hpp$>$}\newline
{\ttfamily \#include $<$opencv2/plot.\+hpp$>$}\newline
Include dependency graph for encoder.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classBlock}{Block}}
\item 
class \mbox{\hyperlink{classMotionVector}{Motion\+Vector}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{encoder_8cpp_af48dc56cf008b2f4190393cf00164912}{calculate\+Difference}} (\mbox{\hyperlink{classBlock}{Block}} block1, \mbox{\hyperlink{classBlock}{Block}} block2)
\item 
vector$<$ \mbox{\hyperlink{classBlock}{Block}} $>$ \mbox{\hyperlink{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70}{Divide\+Frame\+Into\+Blocks}} (Mat frame, int block\+Size)
\item 
float \mbox{\hyperlink{encoder_8cpp_a63a89a6839879b7ad214c64c43281b9a}{distance}} (int x1, int y1, int x2, int y2)
\item 
vector$<$ \mbox{\hyperlink{classBlock}{Block}} $>$ \mbox{\hyperlink{encoder_8cpp_a237a3b08da266195d4588f4972594dc8}{Blocks\+In\+Search\+Area}} (vector$<$ \mbox{\hyperlink{classBlock}{Block}} $>$ blocks, int search\+\_\+x, int search\+\_\+y, int search\+Area)
\item 
Mat \mbox{\hyperlink{encoder_8cpp_a09cc283a55256213e35765d60bebb81e}{Perform\+Motion\+Compensation}} (Mat previous\+Frame, vector$<$ \mbox{\hyperlink{classMotionVector}{Motion\+Vector}} $>$ motion\+Vectors, int block\+Size)
\item 
Mat \mbox{\hyperlink{encoder_8cpp_af254c922066cc2b05cc7e204210681a1}{Calculate\+Residual}} (Mat current\+Frame, Mat predicted\+Frame)
\item 
void \mbox{\hyperlink{encoder_8cpp_a52705df1ed820b311c14b8730d96927a}{Decode\+Inter\+Frame}} (Mat previous\+Frame, Mat residuals, vector$<$ \mbox{\hyperlink{classMotionVector}{Motion\+Vector}} $>$ motion\+Vectors, int block\+Size)
\item 
void \mbox{\hyperlink{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4}{Encode\+Inter\+Frame}} (Mat current\+Frame, Mat previous\+Frame, int block\+Size, int search\+Area)
\item 
int \mbox{\hyperlink{encoder_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{encoder_8cpp_a237a3b08da266195d4588f4972594dc8}\label{encoder_8cpp_a237a3b08da266195d4588f4972594dc8}} 
\index{encoder.cpp@{encoder.cpp}!BlocksInSearchArea@{BlocksInSearchArea}}
\index{BlocksInSearchArea@{BlocksInSearchArea}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{BlocksInSearchArea()}{BlocksInSearchArea()}}
{\footnotesize\ttfamily vector$<$\mbox{\hyperlink{classBlock}{Block}}$>$ Blocks\+In\+Search\+Area (\begin{DoxyParamCaption}\item[{vector$<$ \mbox{\hyperlink{classBlock}{Block}} $>$}]{blocks,  }\item[{int}]{search\+\_\+x,  }\item[{int}]{search\+\_\+y,  }\item[{int}]{search\+Area }\end{DoxyParamCaption})}



Definition at line 73 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{73                                                                                                   \{}
\DoxyCodeLine{74     vector<Block> result\_blocks;}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{keywordflow}{for}(\mbox{\hyperlink{classBlock}{Block}} block : blocks)\{}
\DoxyCodeLine{77         \textcolor{keywordtype}{float} dist = \mbox{\hyperlink{encoder_8cpp_a63a89a6839879b7ad214c64c43281b9a}{distance}}(search\_x, search\_y, block.x, block.y);}
\DoxyCodeLine{78         \textcolor{keywordflow}{if}(dist / block.blockSize <= searchArea)\{}
\DoxyCodeLine{79             result\_blocks.push\_back(block);}
\DoxyCodeLine{80         \}}
\DoxyCodeLine{81     \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keywordflow}{return} result\_blocks;}
\DoxyCodeLine{84 \}}

\end{DoxyCode}


References distance().



Referenced by Encode\+Inter\+Frame().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=287pt]{encoder_8cpp_a237a3b08da266195d4588f4972594dc8_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a237a3b08da266195d4588f4972594dc8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_af48dc56cf008b2f4190393cf00164912}\label{encoder_8cpp_af48dc56cf008b2f4190393cf00164912}} 
\index{encoder.cpp@{encoder.cpp}!calculateDifference@{calculateDifference}}
\index{calculateDifference@{calculateDifference}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{calculateDifference()}{calculateDifference()}}
{\footnotesize\ttfamily int calculate\+Difference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classBlock}{Block}}}]{block1,  }\item[{\mbox{\hyperlink{classBlock}{Block}}}]{block2 }\end{DoxyParamCaption})}



Definition at line 33 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{33                                                     \{}
\DoxyCodeLine{34     }
\DoxyCodeLine{35     Mat Mat1 = block1.\mbox{\hyperlink{classBlock_ace6191918353ea2574f63d4b45273799}{frame}};}
\DoxyCodeLine{36     Mat Mat2 = block2.\mbox{\hyperlink{classBlock_ace6191918353ea2574f63d4b45273799}{frame}};}
\DoxyCodeLine{37 }
\DoxyCodeLine{38     \textcolor{keywordtype}{double} diff = 0.0;}
\DoxyCodeLine{39     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < block1.\mbox{\hyperlink{classBlock_a0cbec497930b5f9e19cf59bd2fb4d078}{blockSize}} ; x++) \{}
\DoxyCodeLine{40         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < block1.\mbox{\hyperlink{classBlock_a0cbec497930b5f9e19cf59bd2fb4d078}{blockSize}}; y++) \{}
\DoxyCodeLine{41             \textcolor{keywordflow}{if} (x >= 0 \&\& x < Mat1.cols \&\& y >= 0 \&\& y < Mat1.rows)\{}
\DoxyCodeLine{42                 diff += abs(Mat1.at<uchar>(block1.\mbox{\hyperlink{classBlock_a9328d6b6fcc9f9c019d091d87ceda41c}{y}} + y, block1.\mbox{\hyperlink{classBlock_a13d0a6d225233353862fa5adcbadf661}{x}} + x) -\/ Mat2.at<uchar>(block2.\mbox{\hyperlink{classBlock_a9328d6b6fcc9f9c019d091d87ceda41c}{y}} + y, block2.\mbox{\hyperlink{classBlock_a13d0a6d225233353862fa5adcbadf661}{x}} + x));}
\DoxyCodeLine{43             \}}
\DoxyCodeLine{44         \}}
\DoxyCodeLine{45     \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{keywordflow}{return} diff;}
\DoxyCodeLine{48 \}}

\end{DoxyCode}


References Block\+::block\+Size, Block\+::frame, Block\+::x, and Block\+::y.



Referenced by Encode\+Inter\+Frame().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_af48dc56cf008b2f4190393cf00164912_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_af254c922066cc2b05cc7e204210681a1}\label{encoder_8cpp_af254c922066cc2b05cc7e204210681a1}} 
\index{encoder.cpp@{encoder.cpp}!CalculateResidual@{CalculateResidual}}
\index{CalculateResidual@{CalculateResidual}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{CalculateResidual()}{CalculateResidual()}}
{\footnotesize\ttfamily Mat Calculate\+Residual (\begin{DoxyParamCaption}\item[{Mat}]{current\+Frame,  }\item[{Mat}]{predicted\+Frame }\end{DoxyParamCaption})}



Definition at line 115 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{115                                                             \{}
\DoxyCodeLine{116     Mat residualImage;}
\DoxyCodeLine{117 }
\DoxyCodeLine{118     \textcolor{comment}{// Check if the input frames have the same size and type}}
\DoxyCodeLine{119     \textcolor{keywordflow}{if} (currentFrame.size() != predictedFrame.size() || currentFrame.type() != predictedFrame.type()) \{}
\DoxyCodeLine{120         cout << \textcolor{stringliteral}{"Input frames have different sizes or types."} << endl;}
\DoxyCodeLine{121         \textcolor{keywordflow}{return} residualImage;}
\DoxyCodeLine{122     \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124     \textcolor{comment}{// Calculate the residual image by subtracting the predicted frame from the current frame}}
\DoxyCodeLine{125     subtract(currentFrame, predictedFrame, residualImage);}
\DoxyCodeLine{126 }
\DoxyCodeLine{127     \textcolor{keywordflow}{return} residualImage;}
\DoxyCodeLine{128 \}}

\end{DoxyCode}


Referenced by Encode\+Inter\+Frame().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_af254c922066cc2b05cc7e204210681a1_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_a52705df1ed820b311c14b8730d96927a}\label{encoder_8cpp_a52705df1ed820b311c14b8730d96927a}} 
\index{encoder.cpp@{encoder.cpp}!DecodeInterFrame@{DecodeInterFrame}}
\index{DecodeInterFrame@{DecodeInterFrame}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{DecodeInterFrame()}{DecodeInterFrame()}}
{\footnotesize\ttfamily void Decode\+Inter\+Frame (\begin{DoxyParamCaption}\item[{Mat}]{previous\+Frame,  }\item[{Mat}]{residuals,  }\item[{vector$<$ \mbox{\hyperlink{classMotionVector}{Motion\+Vector}} $>$}]{motion\+Vectors,  }\item[{int}]{block\+Size }\end{DoxyParamCaption})}



Definition at line 130 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{130                                                                                                            \{}
\DoxyCodeLine{131     Mat predictedFrame = \mbox{\hyperlink{encoder_8cpp_a09cc283a55256213e35765d60bebb81e}{PerformMotionCompensation}}(previousFrame, motionVectors, blockSize);}
\DoxyCodeLine{132     Mat reconstructedFrame = residuals + predictedFrame;}
\DoxyCodeLine{133     imshow(\textcolor{stringliteral}{"idk"}, reconstructedFrame);}
\DoxyCodeLine{134     waitKey(0);}
\DoxyCodeLine{135 \}}

\end{DoxyCode}


References Perform\+Motion\+Compensation().



Referenced by Encode\+Inter\+Frame().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a52705df1ed820b311c14b8730d96927a_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a52705df1ed820b311c14b8730d96927a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_a63a89a6839879b7ad214c64c43281b9a}\label{encoder_8cpp_a63a89a6839879b7ad214c64c43281b9a}} 
\index{encoder.cpp@{encoder.cpp}!distance@{distance}}
\index{distance@{distance}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{distance()}{distance()}}
{\footnotesize\ttfamily float distance (\begin{DoxyParamCaption}\item[{int}]{x1,  }\item[{int}]{y1,  }\item[{int}]{x2,  }\item[{int}]{y2 }\end{DoxyParamCaption})}



Definition at line 68 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{69 \{ }
\DoxyCodeLine{70     \textcolor{keywordflow}{return} sqrt(pow(x2 -\/ x1, 2) + pow(y2 -\/ y1, 2) * 1.0); }
\DoxyCodeLine{71 \} }

\end{DoxyCode}


Referenced by Blocks\+In\+Search\+Area().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a63a89a6839879b7ad214c64c43281b9a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70}\label{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70}} 
\index{encoder.cpp@{encoder.cpp}!DivideFrameIntoBlocks@{DivideFrameIntoBlocks}}
\index{DivideFrameIntoBlocks@{DivideFrameIntoBlocks}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{DivideFrameIntoBlocks()}{DivideFrameIntoBlocks()}}
{\footnotesize\ttfamily vector$<$\mbox{\hyperlink{classBlock}{Block}}$>$ Divide\+Frame\+Into\+Blocks (\begin{DoxyParamCaption}\item[{Mat}]{frame,  }\item[{int}]{block\+Size }\end{DoxyParamCaption})}



Definition at line 50 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{50                                                              \{}
\DoxyCodeLine{51     vector<Block> blocks;}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keywordflow}{if} (frame.empty()) \{}
\DoxyCodeLine{54         cout << \textcolor{stringliteral}{"Empty frame."} << endl;}
\DoxyCodeLine{55         \textcolor{keywordflow}{return} blocks;}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < frame.rows; y += blockSize) \{}
\DoxyCodeLine{59         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < frame.cols; x += blockSize) \{}
\DoxyCodeLine{60             \mbox{\hyperlink{classBlock}{Block}} block(x, y, blockSize, frame);}
\DoxyCodeLine{61             blocks.push\_back(block);}
\DoxyCodeLine{62         \}}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     \textcolor{keywordflow}{return} blocks;}
\DoxyCodeLine{66 \}}

\end{DoxyCode}


Referenced by Encode\+Inter\+Frame().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4}\label{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4}} 
\index{encoder.cpp@{encoder.cpp}!EncodeInterFrame@{EncodeInterFrame}}
\index{EncodeInterFrame@{EncodeInterFrame}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{EncodeInterFrame()}{EncodeInterFrame()}}
{\footnotesize\ttfamily void Encode\+Inter\+Frame (\begin{DoxyParamCaption}\item[{Mat}]{current\+Frame,  }\item[{Mat}]{previous\+Frame,  }\item[{int}]{block\+Size,  }\item[{int}]{search\+Area }\end{DoxyParamCaption})}



Definition at line 137 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{137                                                                                           \{}
\DoxyCodeLine{138     vector<Block> blocks = \mbox{\hyperlink{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70}{DivideFrameIntoBlocks}}(currentFrame, blockSize);}
\DoxyCodeLine{139     vector<Block> previousBlocks = \mbox{\hyperlink{encoder_8cpp_af6ef529e80768812e5eb69f4b7cb2c70}{DivideFrameIntoBlocks}}(previousFrame, blockSize);}
\DoxyCodeLine{140     vector<MotionVector> motionVectors;}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \textcolor{keywordflow}{for}(\mbox{\hyperlink{classBlock}{Block}} block : blocks)\{}
\DoxyCodeLine{143 }
\DoxyCodeLine{144         \textcolor{keywordtype}{int} minDiff = INT\_MAX;}
\DoxyCodeLine{145         \mbox{\hyperlink{classMotionVector}{MotionVector}} MV;}
\DoxyCodeLine{146         vector<Block> searchAreaBlocks = \mbox{\hyperlink{encoder_8cpp_a237a3b08da266195d4588f4972594dc8}{BlocksInSearchArea}}(previousBlocks, block.x, block.y, searchArea);}
\DoxyCodeLine{147         }
\DoxyCodeLine{148         \textcolor{keywordflow}{for}(\mbox{\hyperlink{classBlock}{Block}} previousBlock : searchAreaBlocks)\{}
\DoxyCodeLine{149             \textcolor{keywordtype}{int} diff = \mbox{\hyperlink{encoder_8cpp_af48dc56cf008b2f4190393cf00164912}{calculateDifference}}(block, previousBlock);}
\DoxyCodeLine{150             \textcolor{keywordflow}{if}(diff < minDiff)\{}
\DoxyCodeLine{151                 minDiff = diff;}
\DoxyCodeLine{152                 MV.\mbox{\hyperlink{classMotionVector_a2e722d33cbdbeeba3e52d49b730b9cbd}{blockX}} = previousBlock.x;}
\DoxyCodeLine{153                 MV.\mbox{\hyperlink{classMotionVector_a99b61be6310398f73313a4a18319f058}{blockY}} = previousBlock.y;}
\DoxyCodeLine{154                 MV.\mbox{\hyperlink{classMotionVector_abd7e58050932314ffbcbf6dd663a3ced}{dx}} = block.x -\/ previousBlock.x;}
\DoxyCodeLine{155                 MV.\mbox{\hyperlink{classMotionVector_af131b1ce31ba9b00497a1e313dd01284}{dy}} = block.y -\/ previousBlock.y;}
\DoxyCodeLine{156             \}}
\DoxyCodeLine{157         \}}
\DoxyCodeLine{158         motionVectors.push\_back(MV);}
\DoxyCodeLine{159     \}}
\DoxyCodeLine{160 }
\DoxyCodeLine{161     Mat predictedFrame = \mbox{\hyperlink{encoder_8cpp_a09cc283a55256213e35765d60bebb81e}{PerformMotionCompensation}}(previousFrame, motionVectors, blockSize);}
\DoxyCodeLine{162     Mat residuals = \mbox{\hyperlink{encoder_8cpp_af254c922066cc2b05cc7e204210681a1}{CalculateResidual}}(currentFrame, predictedFrame);}
\DoxyCodeLine{163     \mbox{\hyperlink{encoder_8cpp_a52705df1ed820b311c14b8730d96927a}{DecodeInterFrame}}(previousFrame, residuals, motionVectors, blockSize);}
\DoxyCodeLine{164 \}}

\end{DoxyCode}


References Blocks\+In\+Search\+Area(), Motion\+Vector\+::blockX, Motion\+Vector\+::blockY, calculate\+Difference(), Calculate\+Residual(), Decode\+Inter\+Frame(), Divide\+Frame\+Into\+Blocks(), Motion\+Vector\+::dx, Motion\+Vector\+::dy, and Perform\+Motion\+Compensation().



Referenced by main().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=262pt]{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_a0ddf1224851353fc92bfbff6f499fa97}\label{encoder_8cpp_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{encoder.cpp@{encoder.cpp}!main@{main}}
\index{main@{main}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Definition at line 167 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{167                                 \{}
\DoxyCodeLine{168     Mat frame,lastFrame;}
\DoxyCodeLine{169     VideoCapture cap(\textcolor{stringliteral}{"/home/bunnie/.desktop/vd2.mp4"});}
\DoxyCodeLine{170     cap.read(lastFrame);}
\DoxyCodeLine{171     cvtColor(lastFrame, lastFrame, COLOR\_BGR2GRAY);}
\DoxyCodeLine{172     \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{173         cap.read(frame);}
\DoxyCodeLine{174         cvtColor(frame, frame, COLOR\_BGR2GRAY);}
\DoxyCodeLine{175         \mbox{\hyperlink{encoder_8cpp_af6935e3aecd9ee914aa89e06926725f4}{EncodeInterFrame}}(frame.clone(), lastFrame.clone(), 32, 2);}
\DoxyCodeLine{176         lastFrame = frame.clone();}
\DoxyCodeLine{177     \}}
\DoxyCodeLine{178     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{179 \}}

\end{DoxyCode}


References Encode\+Inter\+Frame().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{encoder_8cpp_a09cc283a55256213e35765d60bebb81e}\label{encoder_8cpp_a09cc283a55256213e35765d60bebb81e}} 
\index{encoder.cpp@{encoder.cpp}!PerformMotionCompensation@{PerformMotionCompensation}}
\index{PerformMotionCompensation@{PerformMotionCompensation}!encoder.cpp@{encoder.cpp}}
\doxysubsubsection{\texorpdfstring{PerformMotionCompensation()}{PerformMotionCompensation()}}
{\footnotesize\ttfamily Mat Perform\+Motion\+Compensation (\begin{DoxyParamCaption}\item[{Mat}]{previous\+Frame,  }\item[{vector$<$ \mbox{\hyperlink{classMotionVector}{Motion\+Vector}} $>$}]{motion\+Vectors,  }\item[{int}]{block\+Size }\end{DoxyParamCaption})}



Definition at line 86 of file encoder.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{86                                                                                                     \{}
\DoxyCodeLine{87     Mat predictedFrame = previousFrame.clone(); \textcolor{comment}{// Create a copy of the previous frame}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{classMotionVector}{MotionVector}}\& mv : motionVectors) \{}
\DoxyCodeLine{90         \textcolor{keywordtype}{int} blockX = mv.blockX;}
\DoxyCodeLine{91         \textcolor{keywordtype}{int} blockY = mv.blockY;}
\DoxyCodeLine{92         \textcolor{keywordtype}{int} dx = mv.dx;}
\DoxyCodeLine{93         \textcolor{keywordtype}{int} dy = mv.dy;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95         \textcolor{comment}{// Update the predicted frame using motion vectors}}
\DoxyCodeLine{96         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < blockSize; ++i) \{}
\DoxyCodeLine{97             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < blockSize; ++j) \{}
\DoxyCodeLine{98                 \textcolor{keywordtype}{int} currentX = blockX + i + dx;}
\DoxyCodeLine{99                 \textcolor{keywordtype}{int} currentY = blockY + j + dy;}
\DoxyCodeLine{100                 \textcolor{keywordtype}{int} prevX = blockX + i;}
\DoxyCodeLine{101                 \textcolor{keywordtype}{int} prevY = blockY + j;}
\DoxyCodeLine{102 }
\DoxyCodeLine{103                 \textcolor{keywordflow}{if} (prevX >= 0 \&\& prevX < previousFrame.cols \&\& prevY >= 0 \&\& prevY < previousFrame.rows}
\DoxyCodeLine{104                 \&\& currentX >= 0 \&\& currentX < predictedFrame.cols \&\& currentY >= 0 \&\& currentY < predictedFrame.rows) \{}
\DoxyCodeLine{105                     predictedFrame.at<uchar>(currentY, currentX) = previousFrame.at<uchar>(prevY, prevX);}
\DoxyCodeLine{106                 \}}
\DoxyCodeLine{107             \}}
\DoxyCodeLine{108         \}}
\DoxyCodeLine{109     \}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111     \textcolor{keywordflow}{return} predictedFrame;}
\DoxyCodeLine{112 \}}

\end{DoxyCode}


Referenced by Decode\+Inter\+Frame(), and Encode\+Inter\+Frame().

Here is the caller graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{encoder_8cpp_a09cc283a55256213e35765d60bebb81e_icgraph}
\end{center}
\end{figure}
